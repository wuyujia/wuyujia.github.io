import{_ as n,W as a,X as s,a1 as t}from"./framework-817d905c.js";const p={},c=t(`<h2 id="背景" tabindex="-1"><a class="header-anchor" href="#背景" aria-hidden="true">#</a> 背景</h2><p>应用服务器抛出一段异常，如下：</p><div class="language-log line-numbers-mode" data-ext="log"><pre class="language-log"><code><span class="token property">Caused by:</span> <span class="token exception javastacktrace language-javastacktrace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>exceptions<span class="token punctuation">.</span>MySQLTransactionRollbackException<span class="token punctuation">:</span> Deadlock found when trying to get lock; try restarting transaction
        <span class="token keyword">at</span> com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>exceptions<span class="token punctuation">.</span>SQLError<span class="token punctuation">.</span><span class="token function">createSQLException</span><span class="token punctuation">(</span>SQLError<span class="token punctuation">.</span>java<span class="token punctuation">:</span>123<span class="token punctuation">)</span> ~[mysql-connector-java-8<span class="token punctuation">.</span>0<span class="token punctuation">.</span>28<span class="token punctuation">.</span>jar!/<span class="token punctuation">:</span>8<span class="token punctuation">.</span>0<span class="token punctuation">.</span>28]
        <span class="token keyword">at</span> com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>exceptions<span class="token punctuation">.</span>SQLExceptionsMapping<span class="token punctuation">.</span><span class="token function">translateException</span><span class="token punctuation">(</span>SQLExceptionsMapping<span class="token punctuation">.</span>java<span class="token punctuation">:</span>122<span class="token punctuation">)</span> ~[mysql-connector-java-8<span class="token punctuation">.</span>0<span class="token punctuation">.</span>28<span class="token punctuation">.</span>jar!/<span class="token punctuation">:</span>8<span class="token punctuation">.</span>0<span class="token punctuation">.</span>28]
        <span class="token keyword">at</span> com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>ClientPreparedStatement<span class="token punctuation">.</span><span class="token function">executeInternal</span><span class="token punctuation">(</span>ClientPreparedStatement<span class="token punctuation">.</span>java<span class="token punctuation">:</span>953<span class="token punctuation">)</span> ~[mysql-connector-java-8<span class="token punctuation">.</span>0<span class="token punctuation">.</span>28<span class="token punctuation">.</span>jar!/<span class="token punctuation">:</span>8<span class="token punctuation">.</span>0<span class="token punctuation">.</span>28]
        <span class="token keyword">at</span> com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>ClientPreparedStatement<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>ClientPreparedStatement<span class="token punctuation">.</span>java<span class="token punctuation">:</span>371<span class="token punctuation">)</span> ~[mysql-connector-java-8<span class="token punctuation">.</span>0<span class="token punctuation">.</span>28<span class="token punctuation">.</span>jar!/<span class="token punctuation">:</span>8<span class="token punctuation">.</span>0<span class="token punctuation">.</span>28]
        <span class="token keyword">at</span> com<span class="token punctuation">.</span>zaxxer<span class="token punctuation">.</span>hikari<span class="token punctuation">.</span>pool<span class="token punctuation">.</span>ProxyPreparedStatement<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>ProxyPreparedStatement<span class="token punctuation">.</span>java<span class="token punctuation">:</span>44<span class="token punctuation">)</span> ~[HikariCP-3<span class="token punctuation">.</span>4<span class="token punctuation">.</span>1<span class="token punctuation">.</span>jar!/<span class="token punctuation">:</span>?]
        <span class="token keyword">at</span> com<span class="token punctuation">.</span>zaxxer<span class="token punctuation">.</span>hikari<span class="token punctuation">.</span>pool<span class="token punctuation">.</span>HikariProxyPreparedStatement<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>HikariProxyPreparedStatement<span class="token punctuation">.</span>java<span class="token punctuation">)</span> ~[HikariCP-3<span class="token punctuation">.</span>4<span class="token punctuation">.</span>1<span class="token punctuation">.</span>jar!/<span class="token punctuation">:</span>?]
        <span class="token keyword">at</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>executor<span class="token punctuation">.</span>statement<span class="token punctuation">.</span>PreparedStatementHandler<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>PreparedStatementHandler<span class="token punctuation">.</span>java<span class="token punctuation">:</span>47<span class="token punctuation">)</span> ~[mybatis-3<span class="token punctuation">.</span>5<span class="token punctuation">.</span>10<span class="token punctuation">.</span>jar!/<span class="token punctuation">:</span>3<span class="token punctuation">.</span>5<span class="token punctuation">.</span>10]
        <span class="token keyword">at</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>executor<span class="token punctuation">.</span>statement<span class="token punctuation">.</span>RoutingStatementHandler<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>RoutingStatementHandler<span class="token punctuation">.</span>java<span class="token punctuation">:</span>74<span class="token punctuation">)</span> ~[mybatis-3<span class="token punctuation">.</span>5<span class="token punctuation">.</span>10<span class="token punctuation">.</span>jar!/<span class="token punctuation">:</span>3<span class="token punctuation">.</span>5<span class="token punctuation">.</span>10]
        <span class="token keyword">at</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>executor<span class="token punctuation">.</span>SimpleExecutor<span class="token punctuation">.</span><span class="token function">doUpdate</span><span class="token punctuation">(</span>SimpleExecutor<span class="token punctuation">.</span>java<span class="token punctuation">:</span>50<span class="token punctuation">)</span> ~[mybatis-3<span class="token punctuation">.</span>5<span class="token punctuation">.</span>10<span class="token punctuation">.</span>jar!/<span class="token punctuation">:</span>3<span class="token punctuation">.</span>5<span class="token punctuation">.</span>10]
        <span class="token keyword">at</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>executor<span class="token punctuation">.</span>BaseExecutor<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>BaseExecutor<span class="token punctuation">.</span>java<span class="token punctuation">:</span>117<span class="token punctuation">)</span> ~[mybatis-3<span class="token punctuation">.</span>5<span class="token punctuation">.</span>10<span class="token punctuation">.</span>jar!/<span class="token punctuation">:</span>3<span class="token punctuation">.</span>5<span class="token punctuation">.</span>10]
        <span class="token keyword">at</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>executor<span class="token punctuation">.</span>CachingExecutor<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>CachingExecutor<span class="token punctuation">.</span>java<span class="token punctuation">:</span>76<span class="token punctuation">)</span> ~[mybatis-3<span class="token punctuation">.</span>5<span class="token punctuation">.</span>10<span class="token punctuation">.</span>jar!/<span class="token punctuation">:</span>3<span class="token punctuation">.</span>5<span class="token punctuation">.</span>10]
        <span class="token keyword">at</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>DefaultSqlSession<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>DefaultSqlSession<span class="token punctuation">.</span>java<span class="token punctuation">:</span>194<span class="token punctuation">)</span> ~[mybatis-3<span class="token punctuation">.</span>5<span class="token punctuation">.</span>10<span class="token punctuation">.</span>jar!/<span class="token punctuation">:</span>3<span class="token punctuation">.</span>5<span class="token punctuation">.</span>10]
        <span class="token keyword">at</span> sun<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>GeneratedMethodAccessor120<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>Unknown Source<span class="token punctuation">)</span> ~[?<span class="token punctuation">:</span>?]
        <span class="token keyword">at</span> sun<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>DelegatingMethodAccessorImpl<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>DelegatingMethodAccessorImpl<span class="token punctuation">.</span>java<span class="token punctuation">:</span>43<span class="token punctuation">)</span> ~[?<span class="token punctuation">:</span>1<span class="token punctuation">.</span>8<span class="token punctuation">.</span>0_201]
        <span class="token keyword">at</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>Method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>Method<span class="token punctuation">.</span>java<span class="token punctuation">:</span>498<span class="token punctuation">)</span> ~[?<span class="token punctuation">:</span>1<span class="token punctuation">.</span>8<span class="token punctuation">.</span>0_201]
        <span class="token keyword">at</span> org<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>SqlSessionTemplate$SqlSessionInterceptor<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>SqlSessionTemplate<span class="token punctuation">.</span>java<span class="token punctuation">:</span>427<span class="token punctuation">)</span> ~[mybatis-spring-2<span class="token punctuation">.</span>0<span class="token punctuation">.</span>7<span class="token punctuation">.</span>jar!/<span class="token punctuation">:</span>2<span class="token punctuation">.</span>0<span class="token punctuation">.</span>7]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>找出死锁的原因，才能正确解决问题</p><h2 id="分析步骤" tabindex="-1"><a class="header-anchor" href="#分析步骤" aria-hidden="true">#</a> 分析步骤</h2><h3 id="通过mysql查询死锁" tabindex="-1"><a class="header-anchor" href="#通过mysql查询死锁" aria-hidden="true">#</a> 通过MySQL查询死锁</h3><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,7),o=[c];function e(u,i){return a(),s("div",null,o)}const k=n(p,[["render",e],["__file","DeadLock.html.vue"]]);export{k as default};
