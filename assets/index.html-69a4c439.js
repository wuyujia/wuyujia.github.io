import{_ as t,W as o,X as c,Y as a,$ as e,a1 as l,a2 as i,Z as s,C as r}from"./framework-aa83d01c.js";const p={},d=i(`<h2 id="查询本机外网ip" tabindex="-1"><a class="header-anchor" href="#查询本机外网ip" aria-hidden="true">#</a> 查询本机外网IP</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> cip.cc

IP      <span class="token builtin class-name">:</span> xxx.xx.xx.xx
地址    <span class="token builtin class-name">:</span> 中国  北京
运营商  <span class="token builtin class-name">:</span> 电信

数据二  <span class="token builtin class-name">:</span> 北京市 <span class="token operator">|</span> 电信

数据三  <span class="token builtin class-name">:</span> 中国北京北京市 <span class="token operator">|</span> 电信
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="日志切割" tabindex="-1"><a class="header-anchor" href="#日志切割" aria-hidden="true">#</a> 日志切割</h2>`,3),u=a("h2",{id:"简易跳板机",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#简易跳板机","aria-hidden":"true"},"#"),s(" 简易跳板机")],-1),v=i(`<h2 id="压缩日志文件" tabindex="-1"><a class="header-anchor" href="#压缩日志文件" aria-hidden="true">#</a> 压缩日志文件</h2><p>单个压缩</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">tar</span> <span class="token parameter variable">-zcvf</span> log.tar.gz stdout.log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>批量压缩并删除源文件</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">find</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-maxdepth</span> <span class="token number">1</span> <span class="token parameter variable">-name</span> <span class="token string">&quot;stdout.log.2020-03-*&quot;</span> <span class="token parameter variable">-type</span> f <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token parameter variable">-I</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token function">tar</span> <span class="token parameter variable">-zcvf</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>.tar.gz <span class="token punctuation">{</span><span class="token punctuation">}</span> --remove-files
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>说明 -maxdepth 1 : 表示搜索目录深度，取1表示只在当前目录下检索，不会检索子目录 -name “stdout.log.2020-03-*” : 表示匹配文件名规则 –remove-files : 表示压缩完成后删除源文件</p></blockquote><p>批量压缩并删除源文件，排查指定后缀名文件</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">find</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-maxdepth</span> <span class="token number">1</span> <span class="token parameter variable">-name</span> <span class="token string">&quot;stdout.log.2020-04-2*&quot;</span> <span class="token parameter variable">-type</span> f <span class="token operator">!</span> <span class="token parameter variable">-name</span> <span class="token string">&quot;*.gz&quot;</span> <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token parameter variable">-I</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token function">tar</span> <span class="token parameter variable">-zcvf</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>.tar.gz <span class="token punctuation">{</span><span class="token punctuation">}</span> --remove-files
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>说明 ! -name “*.gz” : 排查以 .gz 后缀的文件</p></blockquote><h2 id="清理linux垃圾" tabindex="-1"><a class="header-anchor" href="#清理linux垃圾" aria-hidden="true">#</a> 清理Linux垃圾</h2><p>journal垃圾清理</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>journalctl --vacuum-size<span class="token operator">=</span>10M
<span class="token comment"># 删除 /var/log/journal/xxxx 下面的系统日志</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>mongod日志清理</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span> <span class="token operator">&gt;</span> /var/log/mongodb/mongod.log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>mysql慢SQL日志</p><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code># 关闭慢SQL日志打印
set global slow_query_log=0;

# 确认文件地址
show variables like ‘%slow%’;

# 更名历史文件
mv slow.log.bak

# 开启慢SQL日志打印
set global slow_query_log=1;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,16);function m(b,h){const n=r("RouterLink");return o(),c("div",null,[d,a("p",null,[e(n,{to:"/linux/crontab.html"},{default:l(()=>[s("日志切割")]),_:1})]),u,a("p",null,[e(n,{to:"/linux/jump.html"},{default:l(()=>[s("跳板机")]),_:1})]),v])}const g=t(p,[["render",m],["__file","index.html.vue"]]);export{g as default};
